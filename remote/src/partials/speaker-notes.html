<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="../bower_components/app-layout/app-toolbar/app-toolbar.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../mixins/model-mixin.html">
<link rel="import" href="../mixins/dispatcher-mixin.html">

<dom-module id="speaker-notes">
	<template>

		<!-- Styles MUST be inside template -->
		<style>

		:host {
			display: block;
			position: relative;
			overflow: hidden;
			width: 100%;
			height: 40%;
			color:var(--font-color)
		}

		.content{
			display: flex;
			flex-direction: column;
			align-items: stretch;
			align-content: stretch;
			width: 100%;
			height: 100%;
		}

		#notes{
			border-top:10px solid var(--font-color-notes);
			flex-grow:1;
			background: white;
		}
		
		#contentNotes.expand paper-icon-button{
			transform: rotateX(180deg);
		}

		.index-slides{
			position: absolute;
			right:0;
			bottom:0;
			width: auto;
			text-align: right;
			color: var(--font-color-notes);
			padding: 0 10px;
			height: 40px;
			font-size: 12pt;
			background:var(--bg-color);
		}

		.index-slides .current-slide{
			color: var(--font-color-slide);
			font-size: 18pt;
		}

	</style>

<div class="content" id="contentNotes">
	<app-toolbar>
		<paper-icon-button icon="arrow-drop-down-circle" on-tap="_expandNotes"></paper-icon-button>
		<div main-title>Notes</div>
	</app-toolbar>
	<div id="notes">
	</div>
	<div class="index-slides">	
		<span class="current-slide">[[currentSlideNumber]]</span> / [[nbSlides]]
	</div>
</div>


</template>

<script>

	// Extend Polymer.Element base class
	class SpeakerNotes extends DispatcherMixin(Polymer.Element) {

		static get is() { return 'speaker-notes' }

		static get config() {
			// properties, observers meta data
			return {
				properties: {
					expand:{
						type: Object
					},
					currentSlideNumber : { // current slide number on client side
						type: Number,
						value: 1
					},
					nbSlides : { // Total Number of slides        
						type: Number,
						value: 0
					},
				}
			};
		}


		connectedCallback() {
			super.connectedCallback();
		}

		_expandNotes(){
			this.expand = !this.expand;
			if (this.expand){
				this.$.contentNotes.classList.add('expand');
			}else{
				this.$.contentNotes.classList.remove('expand');
			}
			this.dispatchAction('expand-notes', {expand:this.expand});
		}
	}

	// Register custom element definition using standard platform API
	customElements.define(SpeakerNotes.is, SpeakerNotes);

</script>
</dom-module>