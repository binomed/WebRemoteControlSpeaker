<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/font-roboto/roboto.html">
<link rel="import" href="controls-buttons.html">

<dom-module id="screen-preview">
	<template>

		<!-- Styles MUST be inside template -->
		<style>

		:host {
			display: block;
			position: relative;
			overflow: hidden;
			width: 100%;
			height: 40%;
			background: var(--bg-color-abs);
		}

		.index-slides{
			position: absolute;
			right:0;
			top:0;
			width: auto;
			text-align: right;
			color: var(--font-color-notes);
			padding: 0 10px;
			height: 40px;
			font-size: 12pt;
			background:var(--bg-color);
		}
		
		.index-slides .current-slide{
			font-size: 18pt;
		}

		controls-buttons{
			position: absolute;
			top: 0;
			left: 0;
			width: 100%;
			height: 100%;
		}

	</style>

	<iframe hidden$="[[!localUrl]]" width="100%" height="100%" id="next-slide" src$="[[localUrl]]"></iframe>

	<div class="index-slides">	
		<span class="current-slide">[[nextSlideNumber]]</span> / [[nbSlides]]
	</div>
	<controls-buttons
		on-dispatch-action="_dispatchAction"></controls-buttons>


</template>

<script>

	// Extend Polymer.Element base class
	class ScreenPreview extends ModelMixin(Polymer.Element) {

		static get is() { return 'screen-preview' }

		static get config() {
			// properties, observers meta data
			return {
				properties: {
					nextSlideNumber : { // next slide number on preview 
						type: Number,
						value: 1
					},
					nbSlides : { // Total Number of slides        
						type: Number,
						value: 0
					},
					localUrl : String, // var in order to see if the presentation has already be loaded    
				}
			};
		}


		connectedCallback() {
			super.connectedCallback();
			this.index = 0;
			this.slides = 24;
		}

		_dispatchAction(event){
			switch(event.detail.type){
				case 'control-press':
				break;
			}
		}

	}

	// Register custom element definition using standard platform API
	customElements.define(ScreenPreview.is, ScreenPreview);

</script>
</dom-module>